<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">

<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
	integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<title>Sales Business</title>
<body>
	<div class="container">

		<nav class="navbar navbar-expand-lg navbar-light bg-light">

			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item"><a class="nav-link" href="/products">Productos

					</a></li>
					<li class="nav-item"><a class="nav-link" href="/clients">Clientes</a></li>
					<li class="nav-item"><a class="nav-link" href="/sales">Ventas</a></li>
					<li class="nav-item"><a class="nav-link" href="/discounts">Descuentos</a></li>
					<li class="nav-item"><a class="nav-link" href="/stadistics">Estad√≠sticas</a></li>

				</ul>

			</div>
		</nav>

		<div class="row">
			<div
				class="col-sm-10 col-md-10 col-lg-10 col-xl-10 mx-auto text-center">
				<!-- <h1>
					<a href="/pupils"><i class="bi bi-arrow-left-square-fill"></i></a>
				</h1> -->
				<h2 class="mr-auto ml-auto">Crear Descuentos</h2>

			</div>
		</div>
		<div class="row">
			<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8"></div>
			<div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
				<form action="setdiscounts" method="POST" id="form_discount">
					<label for="discount">Introduce el descuento en porcentaje:
					</label> <input class="form-control" type="number" name="discount"
						id="discount"> <input class="btn btn-primary btn-block"
						type="submit" value="Aplicar">
				</form>
			</div>

		</div>
		<table
			class="table table-striped table-borderless table-hover table-sm">

			<thead class="thead-light">
				<tr>

					<th scope="col">Nombre</th>
					<th scope="col">Categoria</th>
					<th scope="col">Precio</th>
					<th class="text-center" scope="col">Seleccionar todos <input
						type="checkbox" id="select-all" name="select-all"></th>

				</tr>
			</thead>
			<tbody>

				<tr th:each="product,iterator:${products}"
					th:fila="'check'+${product.pk_product}">

					<td th:text="${product.name}"></td>
					<td th:text="${product.category.name}"></td>
					<td th:text="${product.price}"></td>
					<td class="text-center"><input type="checkbox" form="form_discount"
						th:id="'check'+${product.pk_product}" th:name="${product.pk_product}"><a
						th:href="'/product/'+ @{${product.pk_product}} +'/edit'"></a></td>


				</tr>

			</tbody>
		</table>

	</div>


	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
		crossorigin="anonymous"></script>

	<script>
	$(document).ready(function() {
		
		document.getElementById("select-all").addEventListener('click',function(e){
			if(e.target.checked){
				document.querySelectorAll("input[id^='check']");
				document.querySelectorAll("input[id^='check']").forEach(inputCheckElement => {
					inputCheckElement.checked=true;
					
				});
				
			}else{
				document.querySelectorAll("input[id^='check']");
				document.querySelectorAll("input[id^='check']").forEach(inputCheckElement => {
					inputCheckElement.checked=false;
					
				});
			}
		});
		
		
		
		
		
		

	});
	
	</script>
</body>
</html>